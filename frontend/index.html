<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgentIA - Code Standardizer</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">‚ö°</span>
                    <span class="logo-text">AgentIA</span>
                </div>
                <span class="version">v2.0</span>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <span class="nav-label">Workflow</span>
                    <div class="nav-item active" data-step="1">
                        <span class="nav-icon">üìÅ</span>
                        <span>Import</span>
                        <span class="nav-badge" id="nav-files-count"></span>
                    </div>
                    <div class="nav-item" data-step="2">
                        <span class="nav-icon">üîç</span>
                        <span>Analyse</span>
                    </div>
                    <div class="nav-item" data-step="3">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span>Traitement</span>
                    </div>
                    <div class="nav-item" data-step="4">
                        <span class="nav-icon">üì¶</span>
                        <span>Export</span>
                    </div>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="status-indicator" id="llm-status">
                    <span class="status-dot"></span>
                    <span class="status-text">Connexion...</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main">
            <!-- Header -->
            <header class="main-header">
                <h1 id="page-title">Importer vos fichiers</h1>
                <p id="page-description">Glissez-d√©posez vos fichiers Python ou un ZIP</p>
            </header>

            <!-- Content Grid -->
            <div class="content-grid">
                <!-- Left Panel -->
                <div class="panel panel-left">
                    <!-- Upload Card -->
                    <div class="card card-upload" id="card-upload">
                        <div class="upload-zone" id="upload-zone">
                            <input type="file" id="file-input" multiple accept=".py,.zip" hidden>
                            <div class="upload-content">
                                <div class="upload-icon">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="17 8 12 3 7 8"/>
                                        <line x1="12" y1="3" x2="12" y2="15"/>
                                    </svg>
                                </div>
                                <p class="upload-title">Glissez vos fichiers ici</p>
                                <p class="upload-subtitle">ou cliquez pour parcourir</p>
                                <div class="upload-formats">
                                    <span class="format-badge">.py</span>
                                    <span class="format-badge">.zip</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Files List Card -->
                    <div class="card card-files" id="card-files" hidden>
                        <div class="card-header">
                            <h3>Fichiers import√©s</h3>
                            <button class="btn-text" id="btn-clear">Tout effacer</button>
                        </div>
                        <div class="files-list" id="files-list"></div>
                    </div>

                    <!-- Options Card -->
                    <div class="card card-options" id="card-options" hidden>
                        <div class="card-header">
                            <h3>Options de traitement</h3>
                        </div>
                        <div class="options-list">
                            <label class="option-item">
                                <input type="checkbox" checked disabled>
                                <div class="option-content">
                                    <span class="option-title">Correction PEP8</span>
                                    <span class="option-desc">Formatage automatique du code</span>
                                </div>
                                <span class="option-tag">Auto</span>
                            </label>
                            <label class="option-item">
                                <input type="checkbox" id="opt-docstrings" checked>
                                <div class="option-content">
                                    <span class="option-title">G√©n√©ration Docstrings</span>
                                    <span class="option-desc">Documentation IA automatique</span>
                                </div>
                            </label>
                        </div>
                        <button class="btn-primary btn-process" id="btn-process">
                            <span>üöÄ Lancer le traitement</span>
                        </button>
                    </div>

                    <!-- Results Card -->
                    <div class="card card-results" id="card-results" hidden>
                        <div class="card-header">
                            <h3>R√©sultats</h3>
                        </div>
                        <div class="results-summary">
                            <div class="result-stat">
                                <span class="result-value" id="result-files">0</span>
                                <span class="result-label">Fichiers</span>
                            </div>
                            <div class="result-stat result-stat-main">
                                <span class="result-value" id="result-improvement">+0</span>
                                <span class="result-label">Am√©lioration moy.</span>
                            </div>
                            <div class="result-stat">
                                <span class="result-value" id="result-docstrings">0</span>
                                <span class="result-label">Docstrings</span>
                            </div>
                        </div>
                        <div class="results-actions">
                            <button class="btn-primary btn-download" id="btn-download">
                                üì¶ T√©l√©charger le ZIP
                            </button>
                            <button class="btn-secondary" id="btn-report">
                                üìä Rapport global
                            </button>
                            <button class="btn-text" id="btn-restart">
                                üîÑ Nouveau traitement
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Right Panel -->
                <div class="panel panel-right">
                    <!-- Stats Card -->
                    <div class="card card-stats" id="card-stats">
                        <div class="stats-header">
                            <div class="score-ring">
                                <svg viewBox="0 0 100 100">
                                    <circle class="score-bg" cx="50" cy="50" r="45"/>
                                    <circle class="score-progress" cx="50" cy="50" r="45" id="score-circle"/>
                                </svg>
                                <div class="score-value" id="score-value">--</div>
                            </div>
                            <div class="score-info">
                                <span class="score-label">Score moyen</span>
                                <span class="score-status" id="score-status">En attente</span>
                            </div>
                        </div>
                        <div class="stats-grid">
                            <div class="stat-box">
                                <span class="stat-value" id="stat-files">0</span>
                                <span class="stat-label">Fichiers</span>
                            </div>
                            <div class="stat-box">
                                <span class="stat-value" id="stat-functions">0</span>
                                <span class="stat-label">Fonctions</span>
                            </div>
                            <div class="stat-box">
                                <span class="stat-value" id="stat-classes">0</span>
                                <span class="stat-label">Classes</span>
                            </div>
                            <div class="stat-box">
                                <span class="stat-value" id="stat-issues">0</span>
                                <span class="stat-label">Probl√®mes</span>
                            </div>
                        </div>
                    </div>

                    <!-- Preview Card -->
                    <div class="card card-preview" id="card-preview" hidden>
                        <div class="card-header">
                            <h3>Pr√©visualisation</h3>
                            <select class="file-selector" id="file-selector"></select>
                        </div>
                        <div class="preview-tabs">
                            <button class="preview-tab active" data-tab="compare">Comparaison</button>
                            <button class="preview-tab" data-tab="report">Rapport</button>
                        </div>
                        <div class="preview-content">
                            <!-- Compare View -->
                            <div class="preview-compare" id="preview-compare">
                                <div class="code-panel">
                                    <div class="code-header">
                                        <span>Original</span>
                                        <span class="code-score" id="score-before">--</span>
                                    </div>
                                    <pre class="code-content" id="code-original"></pre>
                                </div>
                                <div class="code-panel">
                                    <div class="code-header">
                                        <span>Corrig√©</span>
                                        <span class="code-score success" id="score-after">--</span>
                                    </div>
                                    <pre class="code-content" id="code-corrected"></pre>
                                </div>
                            </div>
                            <!-- Report View -->
                            <div class="preview-report" id="preview-report" hidden>
                                <iframe id="report-iframe" class="report-frame"></iframe>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Loading Overlay -->
    <div class="overlay" id="overlay" hidden>
        <div class="loader-card">
            <div class="loader-spinner"></div>
            <p class="loader-text" id="loader-text">Chargement...</p>
            <p class="loader-hint" id="loader-hint"></p>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal" id="modal" hidden>
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <button class="modal-close" id="modal-close">‚úï</button>
            <iframe id="modal-iframe" class="modal-frame"></iframe>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>