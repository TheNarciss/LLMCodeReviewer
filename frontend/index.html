<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgentIA - Code Standardizer</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app">
        <header class="app-header">
            <div>
                <h1 class="header-title" id="page-title">Projet Safran</h1>
                <p style="font-size: 12px; color: #6b7280; margin-top: 2px;" id="page-description">
                    Importez vos fichiers pour commencer
                </p>
            </div>
        </header>

        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">‚ö°</span>
                    <span class="logo-text">AgentIA</span>
                </div>
                <span class="version">v2.0</span>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <span class="nav-label">Workflow</span>
                    <div class="nav-item active" data-step="1">
                        <span class="nav-icon">üìÅ</span>
                        <span>Import</span>
                    </div>
                    <div class="nav-item" data-step="2">
                        <span class="nav-icon">üîç</span>
                        <span>Analyse</span>
                    </div>
                    <div class="nav-item" data-step="3">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span>Options</span>
                    </div>
                    <div class="nav-item" data-step="4">
                        <span class="nav-icon">üì¶</span>
                        <span>Export</span>
                    </div>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="status-indicator" id="llm-status">
                    <span class="status-dot"></span>
                    <span class="status-text">Connexion...</span>
                </div>
            </div>
        </aside>

        <main class="main">
            <div class="content-grid">
                <div class="panel panel-left">
                    <div class="card card-upload" id="card-upload">
                        <div class="upload-zone" id="upload-zone">
                            <input type="file" id="file-input" multiple accept=".py,.zip" hidden>
                            <div class="upload-content">
                                <div class="upload-icon">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="17 8 12 3 7 8"/>
                                        <line x1="12" y1="3" x2="12" y2="15"/>
                                    </svg>
                                </div>
                                <p class="upload-title">Glissez vos fichiers ici</p>
                                <p class="upload-subtitle">ou cliquez pour parcourir</p>
                                <div class="upload-formats">
                                    <span class="format-badge">.py</span>
                                    <span class="format-badge">.zip</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card card-files" id="card-files">
                        <div class="card-header">
                            <h3>Fichiers importes</h3>
                            <button class="btn-text" id="btn-clear">Effacer</button>
                        </div>
                        <div class="files-list" id="files-list"></div>
                    </div>

                    <div class="card card-options" id="card-options">
                        <div class="card-header">
                            <h3>Options de traitement</h3>
                        </div>
                        <div class="options-list">
                            <label class="option-item">
                                <input type="checkbox" id="opt-pep8" checked>
                                <div class="option-content">
                                    <span class="option-title">Correction PEP8</span>
                                    <span class="option-desc">Formatage automatique autopep8</span>
                                </div>
                            </label>
                            <label class="option-item">
                                <input type="checkbox" id="opt-docstrings" checked>
                                <div class="option-content">
                                    <span class="option-title">Docstrings IA</span>
                                    <span class="option-desc">Generation automatique via LLM</span>
                                </div>
                            </label>
                            <label class="option-item">
                                <input type="checkbox" id="opt-profiling">
                                <div class="option-content">
                                    <span class="option-title">Profiling (cProfile)</span>
                                    <span class="option-desc">Analyse des temps d'execution</span>
                                </div>
                            </label>
                            <label class="option-item">
                                <input type="checkbox" id="opt-graph" checked>
                                <div class="option-content">
                                    <span class="option-title">Graphe de dependances</span>
                                    <span class="option-desc">Visualisation interactive D3.js</span>
                                </div>
                            </label>
                        </div>
                        <button class="btn-primary btn-process" id="btn-process">
                            üöÄ Lancer le traitement
                        </button>
                    </div>

                    <div class="card card-results" id="card-results" hidden>
                        <div class="card-header">
                            <h3>Resultats</h3>
                        </div>
                        <div class="results-summary">
                            <div class="result-stat">
                                <span class="result-value" id="result-files">0</span>
                                <span class="result-label">Fichiers</span>
                            </div>
                            <div class="result-stat result-stat-main">
                                <span class="result-value" id="result-improvement">+0</span>
                                <span class="result-label">Amelioration</span>
                            </div>
                        </div>
                        <div class="results-actions">
                            <button class="btn-primary btn-download" id="btn-download">
                                üì¶ Telecharger ZIP
                            </button>
                            <button class="btn-secondary" id="btn-report">
                                üìä Rapport global
                            </button>
                            <button class="btn-secondary" id="btn-project-graph">
                                üîó Graphe projet
                            </button>
                            <button class="btn-text" id="btn-restart">
                                üîÑ Nouveau traitement
                            </button>
                        </div>
                    </div>

                    <div class="card card-stats" id="card-stats">
                        <div class="stats-header">
                            <div class="score-ring">
                                <svg viewBox="0 0 100 100">
                                    <circle class="score-bg" cx="50" cy="50" r="45"/>
                                    <circle class="score-progress" cx="50" cy="50" r="45" id="score-circle"/>
                                </svg>
                                <div class="score-value" id="score-value">--</div>
                            </div>
                            <div class="score-info">
                                <span class="score-label">Score moyen</span>
                                <span class="score-status" id="score-status">En attente</span>
                            </div>
                        </div>
                        <div class="stats-grid">
                            <div class="stat-box">
                                <span class="stat-value" id="stat-files">0</span>
                                <span class="stat-label">Fichiers</span>
                            </div>
                            <div class="stat-box">
                                <span class="stat-value" id="stat-functions">0</span>
                                <span class="stat-label">Fonctions</span>
                            </div>
                            <div class="stat-box">
                                <span class="stat-value" id="stat-classes">0</span>
                                <span class="stat-label">Classes</span>
                            </div>
                            <div class="stat-box">
                                <span class="stat-value" id="stat-issues">0</span>
                                <span class="stat-label">Problemes</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel panel-right">
                    <div class="card card-preview" id="card-preview">
                        <div class="card-header">
                            <div style="display:flex; align-items:center; gap:10px; flex:1;">
                                <h3>Fichier</h3>
                                <select class="file-selector" id="file-selector"></select>
                            </div>
                            <div class="header-actions">
                                <button class="btn-text" id="btn-download-file" title="T√©l√©charger ce fichier">
                                    <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                        <polyline points="7 10 12 15 17 10"></polyline>
                                        <line x1="12" y1="15" x2="12" y2="3"></line>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="preview-tabs">
                            <button class="preview-tab active" data-tab="code">Code</button>
                            <button class="preview-tab" data-tab="report">Rapport</button>
                            <button class="preview-tab" data-tab="graph">Graphe</button>
                        </div>
                        <div class="preview-content">
                            <div class="preview-code" id="preview-code">
                                <div class="code-compare">
                                    <div class="code-panel">
                                        <div class="code-header">
                                            <span>Original</span>
                                            <span class="code-score" id="score-before">--</span>
                                        </div>
                                        <pre class="code-content" id="code-original"></pre>
                                    </div>
                                    <div class="code-panel">
                                        <div class="code-header">
                                            <span>Corrige</span>
                                            <span class="code-score success" id="score-after">--</span>
                                        </div>
                                        <pre class="code-content" id="code-corrected"></pre>
                                    </div>
                                </div>
                            </div>
                            <div class="preview-iframe" id="preview-report" hidden>
                                <iframe id="iframe-report" class="preview-frame"></iframe>
                            </div>
                            <div class="preview-iframe" id="preview-graph" hidden>
                                <iframe id="iframe-graph" class="preview-frame"></iframe>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div class="overlay" id="overlay" hidden>
        <div class="loader-card">
            <div class="loader-spinner"></div>
            <p class="loader-text" id="loader-text">Chargement...</p>
            <p class="loader-hint" id="loader-hint"></p>
        </div>
    </div>

    <div class="modal" id="modal" hidden>
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <button class="modal-close" id="modal-close">‚úï</button>
            <iframe id="modal-iframe" class="modal-frame"></iframe>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>